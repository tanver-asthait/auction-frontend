<div class="admin-dashboard">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-content">
      <h1 class="dashboard-title">
        <span class="icon">âš¡</span>
        Auction Control Center
      </h1>
      <div class="header-info">
        <div class="current-time">{{ currentDateTime() }}</div>
        <div class="connection-indicator" [class.connected]="wsService.connected()" [class.disconnected]="!wsService.connected()">
          <span class="status-dot"></span>
          {{ wsService.connected() ? 'LIVE' : 'OFFLINE' }}
        </div>
      </div>
    </div>
  </header>

    <!-- Control Panel -->
  <div class="control-panel">
    <h2>ğŸ® Auction Controls</h2>
    <div class="control-buttons">
      <button class="control-btn start-btn" 
              (click)="startAuction()"
              [disabled]="!wsService.connected() || isRunning()"
              title="Start the auction">
        <span class="btn-icon">ğŸš€</span>
        Start Auction
      </button>

      <button class="control-btn sell-btn"
              (click)="sellPlayer()"
              [disabled]="!wsService.connected() || !isRunning()"
              title="Sell current player">
        <span class="btn-icon">ğŸ”¨</span>
        Sell Player
      </button>

      <button class="control-btn next-btn"
              (click)="nextPlayer()"
              [disabled]="!wsService.connected()"
              title="Move to next player">
        <span class="btn-icon">â­ï¸</span>
        Next Player
      </button>
    </div>
  </div>

  <!-- Main Dashboard Grid -->
  <div class="dashboard-grid">
    
    <!-- Timer & Status Card -->
    <div class="dashboard-card timer-card" [class.running]="isRunning()" [class.pulse]="timerPulse()">
      <div class="card-header">
        <h2>ğŸ• Auction Timer</h2>
        <div class="status-badge" [class.active]="isRunning()">
          {{ isRunning() ? 'LIVE' : 'PAUSED' }}
        </div>
      </div>
      <div class="timer-display" [style.color]="getTimerColor()">
        {{ getTimerDisplay() }}
      </div>
      <div class="timer-info">
        <div *ngIf="auctionStartTime()" class="auction-duration">
          Duration: {{ getAuctionDuration() }}
        </div>
      </div>
    </div>

    <!-- Current Player Card -->
    <div class="dashboard-card current-player-card">
      <div class="card-header">
        <h2>ğŸ¯ Current Player</h2>
      </div>
      <div *ngIf="currentPlayer(); else noPlayerTemplate" class="player-info">
        <div class="player-image" *ngIf="currentPlayer()?.image">
          <img [src]="currentPlayer()!.image" [alt]="currentPlayer()!.name" />
        </div>
        <div class="player-details">
          <h3 class="player-name">{{ currentPlayer()!.name }}</h3>
          <div class="player-positions">
            <span *ngFor="let pos of getPositionArray(currentPlayer()!.position)" 
                  class="position-badge" 
                  [class]="'position-' + pos.toLowerCase().replace(' ', '-')">
              {{ pos }}
            </span>
          </div>
          <div class="price-info">
            <div class="base-price">Base: {{ formatCurrency(currentPlayer()!.basePrice) }}</div>
          </div>
        </div>
      </div>
      <ng-template #noPlayerTemplate>
        <div class="no-player">
          <div class="no-player-icon">ğŸƒâ€â™‚ï¸</div>
          <p>No player in auction</p>
        </div>
      </ng-template>
    </div>

    <!-- Bidding Information -->
    <div class="dashboard-card bidding-card" [class.new-bid]="newBidAnimation()">
      <div class="card-header">
        <h2>ğŸ’° Current Bidding</h2>
      </div>
      <div class="bidding-content">
        <div class="highest-bid">
          <div class="bid-amount">{{ formatCurrency(highestBid()) }}</div>
          <div class="bid-team">{{ highestBidder() }}</div>
        </div>
        <div class="bid-progress" *ngIf="currentPlayer()">
          <div class="progress-bar">
            <div class="progress-fill" 
                 [style.width.%]="((highestBid() - currentPlayer()!.basePrice) / currentPlayer()!.basePrice * 100)">
            </div>
          </div>
          <div class="progress-text">
            {{ Math.round(((highestBid() - currentPlayer()!.basePrice) / currentPlayer()!.basePrice * 100)) }}% above base
          </div>
        </div>
      </div>
    </div>

    <!-- Statistics Card -->
    <div class="dashboard-card stats-card">
      <div class="card-header">
        <h2>ğŸ“Š Auction Stats</h2>
      </div>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value">{{ totalPlayers() }}</div>
          <div class="stat-label">Total Players</div>
        </div>
        <div class="stat-item sold">
          <div class="stat-value">{{ soldPlayers() }}</div>
          <div class="stat-label">Sold</div>
        </div>
        <div class="stat-item remaining">
          <div class="stat-value">{{ remainingPlayers() }}</div>
          <div class="stat-label">Remaining</div>
        </div>
        <div class="stat-item revenue">
          <div class="stat-value">{{ formatCurrency(totalRevenue()) }}</div>
          <div class="stat-label">Total Revenue</div>
        </div>
      </div>
      <div class="progress-indicator">
        <div class="progress-bar-full">
          <div class="progress-fill-full" [style.width.%]="getProgressPercentage()"></div>
        </div>
        <div class="progress-label">{{ Math.round(getProgressPercentage()) }}% Complete</div>
      </div>
    </div>

    <!-- Recent Bids -->
    <div class="dashboard-card recent-bids-card">
      <div class="card-header">
        <h2>ğŸ”¥ Recent Bids</h2>
      </div>
      <div class="bids-list">
        <div *ngFor="let bid of recentBids(); let i = index" class="bid-item" [class]="'bid-' + i">
          <div class="bid-team">{{ bid.teamName }}</div>
          <div class="bid-amount">{{ formatCurrency(bid.bidAmount) }}</div>
          <div class="bid-time">{{ bid.timestamp | date:'HH:mm:ss' }}</div>
        </div>
        <div *ngIf="recentBids().length === 0" class="no-bids">
          <span>ğŸ¤ No bids yet</span>
        </div>
      </div>
    </div>

    <!-- Teams Overview -->
    <div class="dashboard-card teams-card">
      <div class="card-header">
        <h2>ğŸ† Teams</h2>
      </div>
      <div class="teams-list">
        <div *ngFor="let team of teams()" class="team-item">
          <div class="team-info">
            <div class="team-name">{{ team.name }}</div>
            <div class="team-stats">
              <span class="budget">Budget: {{ formatCurrency(team.budget) }}</span>
              <span class="players-count">Players: {{ team.players.length || 0 }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Last Sold Info Banner -->
  <div *ngIf="lastSoldInfo()" class="sold-banner">
    <div class="sold-content">
      <span class="sold-icon">ğŸ‰</span>
      <span class="sold-text">{{ lastSoldInfo() }}</span>
    </div>
  </div>

  <!-- Error Display -->
  <div *ngIf="wsService.error()" class="error-banner">
    <span class="error-icon">âš ï¸</span>
    <span class="error-text">{{ wsService.error() }}</span>
  </div>
</div>
